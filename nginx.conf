
# server {
#     listen 80;
#     server_name 51.195.116.184;

#     root /usr/share/nginx/html;
#     index index.html;

#     # Main entry point for SPA
#     location / {
#         try_files $uri $uri/ /index.html;
#     }

#     # Proxy API requests to backend
#     location /api/ {
#         proxy_pass http://backend:5000/api/;
#         proxy_http_version 1.1;
#         proxy_set_header Upgrade $http_upgrade;
#         proxy_set_header Connection 'upgrade';
#         proxy_set_header Host $host;
#         proxy_cache_bypass $http_upgrade;
#     }

#     # Handle 404s by redirecting to index.html (for client-side routing)
#     error_page 404 /index.html;

#     # Cache static assets like JS, CSS, images for 1 year
#     location ~* \.(js|css|png|jpg|jpeg|gif|ico|woff|woff2)$ {
#         expires 1y;
#         add_header Cache-Control "public";
#         log_not_found off;
#         access_log off;
#     }

#     # Optionally limit caching for HTML files to prevent stale content
#     location ~* \.html$ {
#         expires -1;
#         add_header Cache-Control "no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0";
#     }

#     # GZIP Compression Settings
#     gzip on;
#     gzip_min_length 256;
#     gzip_comp_level 5;
#     gzip_types text/plain application/json application/javascript text/css application/xml text/javascript;
#     gzip_vary on;
# }

# server {
#     listen 80;
#     server_name helmirmili.tn www.helmirmili.tn;

#     root /usr/share/nginx/html;
#     index index.html;

#     # Serve config.json
#     location = /config.json {
#         default_type application/json;
#         try_files /config.json =404;
#     }

#     # Proxy API requests to backend
#     location /api/ {
#         proxy_pass http://172.190.236.125:5000/;  # Make sure this matches your docker-compose backend service
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#     }

#     # Handle SPA routing: serve index.html for all other requests
#     location / {
#         try_files $uri /index.html;
#     }

#     # Optional: gzip compression
#     gzip on;
#     gzip_types text/plain application/javascript application/json text/css application/xml;
#     gzip_min_length 256;
# }